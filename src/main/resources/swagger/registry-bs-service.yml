swagger: "2.0"
info:
  title: "Message Registries"
  description: "Provides the list of Message Registries and their Endpoints available in an Federated Ebox"
  version: "1.0"
tags:
  - name: "MessageRegistries"
schemes:
  - "https"
paths:
  /messageRegistries:
    get:
      tags:
        - "MessageRegistries"
      summary: "List all message registries of the federated ebox."
      description: ""
      operationId: "getAllMessageRegistries"
      produces:
        - "application/json"

      responses:
        200:
          description: "successful operation"
          schema:
            $ref: "#/definitions/MessageRegistries"
  /messageRegistries/{id}:
    get:
      tags:
        - "MessageRegistries"
      summary: "Get a messageRegistry by its messageRegistryId"
      description: ""
      operationId: "getMessageRegistryById"
      produces:
        - "application/json"
      parameters:
        - $ref: '#/parameters/id'
      responses:
        200:
          description: "successful operation"
          schema:
            $ref: "#/definitions/MessageRegistry"
        400:
          description: "Invalid messageRegistryId supplied"
          schema:
            $ref: "#/definitions/Problem"
        404:
          description: "MessageRegistryId not found"
          schema:
            $ref: "#/definitions/Problem"
parameters:
  id:
    name: id
    in: path
    required: true
    type: string
    description: MessageRegistry Unique Identifier

definitions:
  MessageRegistry:
    type: "object"
    required:
      - "id"
      - "name"
      - "description"
      - "endpoints"
    properties:
      id:
        type: "string"
        example: "socsec_v1"
        description: "Identifier of the messageRegistry"
        minLength: 1
        maxLength: 100
      name:
        description: "Common type defined to provide a string value for each supported\
          \ language among nl, fr, de"
        $ref: "#/definitions/TranslatedString"
      description:
        description: "Common type defined to provide a string value for each supported\
          \ language among nl, fr, de"
        $ref: "#/definitions/TranslatedString"
      endpoints:
        type: "array"
        items:
          $ref: "#/definitions/MessageRegistryEndpoint"
        description: "The List of endpoints for the Message Registry. IMPORTANT: There cannot be two Endpoints supporting the same version of the API."
    description: "Schema describing the messageRegistry resource that returns the necessary information concerning a messageResource"
  MessageRegistryEndpoint:
    description: "Version of a Message registry"
    type: object
    properties:
      url:
        type: "string"
        example: "http://ebox-citizen-rest.int.paas.socialsecurity.be/REST/ebox/citizen/v2/"
        description: "The URL to the messageRegistry implementation"
      activationDate:
        type: "string"
        format: "date"
        example: "2017-12-01"
        description: "Activation date of the service. Services should be ignored when they are not yet activated."
      deactivationDate:
        type: "string"
        format: "date"
        example: "2018-01-01"
        description: "Deactivation date of the service. Services should be ignored when they are deactivated."
      technicalContact:
        type: "string"
        example: "eboxintegration@smals.be"
        description: "Contact information for technical questions concerning the implementation of the REST service by the provider"
      apiVersion:
        type: "string"
        example: "2.0"
        description: "Version number of the API implemented by the messageRegistry."
  MessageRegistries:
    description: "List of messageRegistries"
    type: "object"
    properties:
      items:
        type: "array"
        items:
          $ref: "#/definitions/MessageRegistry"
      totalItems:
        type: "integer"
        format: "int32"
        description: "The number of messageRegistries in the array"
  Problem:
    description: A Problem Details object (RFC 7807)
    type: object
    properties:
      type:
        type: string
        format: uri
        description: An absolute URI that identifies the problem type
      href:
        type: string
        format: uri
        description: An absolute URI that, when dereferenced, provides human-readable documentation for the problem type (e.g. using HTML).
      title:
        type: string
        description: A short summary of the problem type. Written in English and readable for engineers (usually not suited for non technical stakeholders and not localized).
        example: Service Unavailable
      status:
        type: integer
        format: int32
        description: The HTTP status code generated by the origin server for this occurrence of the problem.
        minimum: 400
        maximum: 600
        exclusiveMaximum: true
        example: 503
      detail:
        type: string
        description: A human-readable explanation specific to this occurrence of the problem
      instance:
        type: string
        format: uri
        description: An absolute URI reference that identifies the specific occurrence of the problem. It may or may not yield further information if dereferenced.
    example:
      {
        "type": "urn:problem-type:belgif:payloadTooLarge",
        "href": "https://www.gcloud.belgium.be/rest/problems/payloadTooLarge.html", # location of linked doc will change in the future to recommended URI structure
        "title": "Payload Too Large",
        "status": 413,
        "detail": "Request message must not be larger than 10 MB",
        "instance": "urn:uuid:123e4567-e89b-12d3-a456-426614174000"
      }
  TranslatedString:
    type: "object"
    properties:
      nl:
        type: "string"
      fr:
        type: "string"
      de:
        type: "string"
    description: "Common type defined to provide a string value for each supported\
      \ language among nl, fr, de"
